<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="../main_page/reset.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="header.css">
</head>

<body>
    <div class="wrapper">
        <header class="header" id="header">
            <div class="logo">
                <a href="../main_page/index.html"><img src="../img/main_page/logo.png" alt="LOGO"></a>
            </div>
            <ul>
                <li class="menu"><a href="../planner_page/planner.html" class="navLinks">플래너</a></li>
                <li class="menu"><a href="../recommand_page/recommand.html" class="navLinks">추천 여행지</a></li>
                <li class="menu"><a href="traveltest.html" class="navLinks">테스트</a></li>
                <li class="menu"><a href="../community_page/community_free.html" class="navLinks">커뮤니티</a></li>
            </ul>
            <div class="link">
                <a href="#download"><img src="../img/main_page/download.png" alt="DOWNLOAD"></a>
            </div>
        </header>
        <article class="start">
            <img class="background" src="../img/test_page/test.png">
            <div class="textbox">
                <p class="textstart">시뮬레이션으로 알아보는 <br> 나의 여행성향</p>
                <button type="button" class="startbutton" onclick="start();">시작하기></button>
            </div>
        </article>
        <article class="question">
            <img class="background" src="../img/test_page/testing.png">
            <div class="questionbox">
                <h2 id="title">문제</h2>
                <input id="type" type="hidden" value="EI">
                <div class="button">
                    <button id="A" type="button" class="btn btn-secondary mt-5" style="background-color:#717d8b; font-size: 0.8rem;">Secondary</button>
                    <button id="B" type="button" class="btn btn-secondary mt-5" style="background-color: #717d8b; font-size: 0.8rem;">Secondary</button>
                </div>
            </div>
        </article>
        <article class="result">
            <img class="background" src="../img/test_page/result.png">
            <div class="resultbox">
                <p class="textresult">여행 성향 테스트 결과</p>
                <img id="img" src="SALF.PNG" alt="personality">
                <div class="share addthis_inline_share_toolbox"></div>

            </div>

        </article>
        <input type="hidden" id="SI" value="0">
        <input type="hidden" id="HA" value="0">
        <input type="hidden" id="PL" value="0">
        <input type="hidden" id="FR" value="0">
    </div>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
    <script>
        var pesonality;
        var num = 1;
        var q = {
            1: {
                "title": "우연히 TV 속에서 한 여행지를 보았다. 그리고 그곳으로 여행을 떠날 생각에 설렘이 가득하다. 당신이 보고 있는 여행지는?",
                "type": "HA",
                "A": "예쁜 풍경과 힐링 요소가 많은 여행지",
                "B": "액티비티와 즐길 거리가 많은 여행지"
            },
            2: {
                "title": "바로 인터넷 검색을 시작한다. 당신이 중점적으로 생각하는 것은? ",
                "type": "PL",
                "A": "인스타그램 좋아요가 많은 스팟들을 분류한다",
                "B": "블로그를 중심으로 찐 로컬 스팟을 찾는다"
            },
            3: {
                "title": "당장 여행을 가고 싶지만 이번 주말 비행기 표 값이 만만치 않다.",
                "type": "FR",
                "A": "내가 가고 싶다면 비행기 값이 무슨 상관!",
                "B": "여행지 비 성수기를 노려 싼 티켓을 구매!"
            },
            4: {
                "title": "친구에게 같이 여행을 가자고 연락이 왔다. 당신이 같이 갈 친구는?",
                "type": "SI",
                "A": "계획표는 늘 내 손안에! j형 인간 민영",
                "B": "내가 가는 길이 곧 길이다~ 가서 생각하자! 즉흥적인 p형 인간 지우"
            },
            5: {
                "title": "여행 메이트와 톡방이 만들어졌다. 당신이 할 일은?",
                "type": "SI",
                "A": "나만 믿고 따라와~ 나의 주도하에 여행계획을 짠다",
                "B": "아우 귀찮아~ 난 군말없이 따라가기만 할께!"
            },
            6: {
                "title": "숙소 선정을 위한 최종 후보 2곳이 올라왔다. 당신의 선택은?",
                "type": "HA",
                "A": "아침에 일어나면 새소리와 나무 향을 잔뜩 느낄 수 있는 숲 뷰 숙소",
                "B": "열정 가득한 도시의 모든 전경을 볼 수 있는 시티뷰 숙소  "
            },
            7: {
                "title": "드디어 여행 날이 다가왔다. 당신의 행동은?",
                "type": "PL",
                "A": "출발과 도착의 설레는 마음을 모두 인스타 그램으로 기록해야지!",
                "B": "모든 정신은 여행을 즐기는 곳에만! 새로운 공간의 공기를 몸으로 느끼자!"
            },
            8: {
                "title": "가려고 했던 맛집에 사정이 생겨 문을 닫았다",
                "type": "SI",
                "A": "리뷰를 비교 분석해서 새로운 맛집을 찾아보자!",
                "B": "주변에 맛있어 보이는 집에 들어가자!"
            },
            9: {
                "title": "여행지 주변에 대형 놀이공원이 오픈했다는 소식을 들었다. 하지만 자유이용권의 가격은 너무나 비싼데…",
                "type": "FR",
                "A": "그래도 언제 가겠어! 이정도 퀄리티면 5만원 지불할 수 있지!",
                "B": "여행의 하루를 놀이공원으로 소비할 수 없어~ 입장권으로 구경만 하자!"
            },
            10: {
                "title": "시간 절약으로 계획했던 여행이 예상보다 3시간 일찍 끝났다. 숙소로 돌아가는 길에 한 곳을 방문할 수 있다면?",
                "type": "HA",
                "A": "이색체험과 힐링을 동시에 할 수 있는 공방 혹은 동물 카페",
                "B": "여행지의 풍경을 높은 심장박동수로 즐길 수 있는 집라인"
            },
            11: {
                "title": "오늘의 여행을 마무리하는 저녁식사! 당신의 선택은?",
                "type": "PL",
                "A": "인스타로 인싸 인증 가능한 아름다운 인테리어의 MZ세대 저격 맛집!",
                "B": "여행지 원주민들만 간다는 찐 로컬 맛집!"
            },
            12: {
                "title": "여행 마지막 날. 돌아가는 길에 여행지를 기념할 수 있는 각종 상품들이 눈에 밟힌다.",
                "type": "FR",
                "A": "고민보단 go! 가족들과 친구들에게 선물 그리고 여행을 추억하기 위해 기념품 싹쓸이",
                "B": "이미 우리 마음속에 여행지의 추억이 가득, 기념품은 사치야!"
            }
        }
        var result = {
            "SHPF": {
                "img": "SHPF.png"
            },
            "SHPR": {
                "img": "SHPR.png"
            },
            "SHLF": {
                "img": "SHLF.png"
            },
            "SHLR": {
                "img": "SHLR.png"
            },
            "SAPF": {
                "img": "SAPF.png"
            },
            "SAPR": {
                "img": "SAPR.png"
            },
            "SALF": {
                "img": "SALF.png"
            },
            "SALR": {
                "img": "SALR.png"
            },
            "IHPF": {
                "img": "IHPF.png"
            },
            "IHPR": {
                "img": "IHPR.png"
            },
            "IHLF": {
                "img": "astrIHLFonaut.png"
            },
            "IHLR": {
                "img": "IHLR.png"
            },
            "IAPF": {
                "img": "IAPF.png"
            },
            "IAPR": {
                "img": "IAPR.png"
            },
            "IALF": {
                "img": "IALF.png"
            },
            "IALR": {
                "img": "IALR.png"
            }
        }

        function start() {
            $(".start").hide();
            $(".question").show();
            next();
        }
        $("#A").click(function() {
            var type = $("#type").val()
            var prevalue = $("#" + type).val();
            $("#" + type).val(parseInt(prevalue) + 1);
            next();
        });
        $("#B").click(function() {
            next();
        });

        function next() {
            if (num == 13) {
                $(".question").hide();
                $(".result").show();

                var mbti = ""
                if ($("#SI").val() < 2) {
                    mbti = mbti + "I";
                } else {
                    mbti = mbti + "S";
                }
                if ($("#HA").val() < 2) {
                    mbti = mbti + "A";
                } else {
                    mbti = mbti + "H";
                }
                if ($("#PL").val() < 2) {
                    mbti = mbti + "L";
                } else {
                    mbti = mbti + "P";
                }
                if ($("#FR").val() < 2) {
                    mbti = mbti + "R";
                } else {
                    mbti = mbti + "F";
                }
                $("#img").attr("src", result[mbti]["img"]);
                $("#city").html(result[mbti]["city"]);
                $("#explain").html(result[mbti]["explain"]);

                switch (mbti) {
                    case "SHPF":
                        pesonality = 1;
                        break;
                    case "SHPR":
                        pesonality = 2;
                        break;
                    case "SHLF":
                        pesonality = 3;
                        break;
                    case "SHLR":
                        pesonality = 4;
                        break;
                    case "SAPF":
                        pesonality = 5;
                        break;
                    case "SAPR":
                        pesonality = 6;
                        break;
                    case "SALF":
                        pesonality = 7;
                        break;
                    case "SALR":
                        pesonality = 8;
                        break;
                    case "IHPF":
                        pesonality = 9;
                        break;
                    case "IHPR":
                        pesonality = 10;
                        break;
                    case "IHLF":
                        pesonality = 11;
                        break;
                    case "IHLR":
                        pesonality = 12;
                        break;
                    case "IAPF":
                        pesonality = 13;
                        break;
                    case "IAPR":
                        pesonality = 14;
                        break;
                    case "IALF":
                        pesonality = 15;
                        break;
                    case "IALR":
                        pesonality = 16;
                        break;
                }
                var id = new URLSearchParams(location.search).get('user_id');
                var newurl = "api/v1/users/travelFavorite/";
                newurl = newurl + id + "/" + pesonality;
                fetch(newurl, {
                    method: 'PUT',
                    headers: {
                        'content-type': 'application/json'
                    }
                })
            } else {
                $(".progress-bar").attr('style', 'width: calc(100/12*' + num + '%)');
                $("#title").html(q[num]["title"]);
                $("#type").val(q[num]["type"]);
                $("#A").html(q[num]["A"]);
                $("#B").html(q[num]["B"]);
                num++;
            }
        }
    </script>
    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-62691fed51315c07"></script>
</body>

</html>